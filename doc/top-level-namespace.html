<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Top Level Namespace
  
    &mdash; Documentation by YARD 0.9.37
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/custom.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo;
    
    
    <span class="title">Top Level Namespace</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Top Level Namespace
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  

  
</div>








  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#addToColor-instance_method" title="#addToColor (instance method)">#<strong>addToColor</strong>(hexCode)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#checkOrders-instance_method" title="#checkOrders (instance method)">#<strong>checkOrders</strong>(orderType, orderId)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Transaction ———————————————————–.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#createBuyOrder-instance_method" title="#createBuyOrder (instance method)">#<strong>createBuyOrder</strong>(userId, colorId, price, amount)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#createColor-instance_method" title="#createColor (instance method)">#<strong>createColor</strong>(hexCode)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#createSellOrder-instance_method" title="#createSellOrder (instance method)">#<strong>createSellOrder</strong>(userId, colorId, price, amount)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#createUser-instance_method" title="#createUser (instance method)">#<strong>createUser</strong>(username, password, adminLevel)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#createUserColor-instance_method" title="#createUserColor (instance method)">#<strong>createUserColor</strong>(userId, colorId, amount)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#deleteBuyOrder-instance_method" title="#deleteBuyOrder (instance method)">#<strong>deleteBuyOrder</strong>(id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#deleteSellOrder-instance_method" title="#deleteSellOrder (instance method)">#<strong>deleteSellOrder</strong>(id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__-instance_method" title="#GET / (instance method)">#<strong>GET /</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__home-instance_method" title="#GET /home (instance method)">#<strong>GET /home</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Display the home page.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__images-instance_method" title="#GET /images (instance method)">#<strong>GET /images</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Display the images page.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__images_new-instance_method" title="#GET /images/new (instance method)">#<strong>GET /images/new</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Display the create image page.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__images_show__id-instance_method" title="#GET /images/show/:id (instance method)">#<strong>GET /images/show/:id</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Display a specific image page.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__stats-instance_method" title="#GET /stats (instance method)">#<strong>GET /stats</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Display the stats page.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__users_login-instance_method" title="#GET /users/login (instance method)">#<strong>GET /users/login</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Display the login page.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__users_logout-instance_method" title="#GET /users/logout (instance method)">#<strong>GET /users/logout</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__users_new-instance_method" title="#GET /users/new (instance method)">#<strong>GET /users/new</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Display the register page.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET_users_show__id-instance_method" title="#GET users/show/:id (instance method)">#<strong>GET users/show/:id</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Display a specific user page.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#getAllBuyOrders-instance_method" title="#getAllBuyOrders (instance method)">#<strong>getAllBuyOrders</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Orders —————————————————————-.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#getAllBuyOrdersFromUser-instance_method" title="#getAllBuyOrdersFromUser (instance method)">#<strong>getAllBuyOrdersFromUser</strong>(id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#getAllBuyOrdersFromUserAndColor-instance_method" title="#getAllBuyOrdersFromUserAndColor (instance method)">#<strong>getAllBuyOrdersFromUserAndColor</strong>(id, colorId)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#getAllColors-instance_method" title="#getAllColors (instance method)">#<strong>getAllColors</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Colors —————————————————————-.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#getAllSellOrders-instance_method" title="#getAllSellOrders (instance method)">#<strong>getAllSellOrders</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#getAllSellOrdersFromUser-instance_method" title="#getAllSellOrdersFromUser (instance method)">#<strong>getAllSellOrdersFromUser</strong>(id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#getAllSellOrdersFromUserAndColor-instance_method" title="#getAllSellOrdersFromUserAndColor (instance method)">#<strong>getAllSellOrdersFromUserAndColor</strong>(id, colorId)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#getAllUsers-instance_method" title="#getAllUsers (instance method)">#<strong>getAllUsers</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Users —————————————————————–.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#getBuyOrderById-instance_method" title="#getBuyOrderById (instance method)">#<strong>getBuyOrderById</strong>(id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#getBuyOrdersByColorId-instance_method" title="#getBuyOrdersByColorId (instance method)">#<strong>getBuyOrdersByColorId</strong>(color_id, limit = 5)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#getColorByHexcode-instance_method" title="#getColorByHexcode (instance method)">#<strong>getColorByHexcode</strong>(hexCode)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#getColorById-instance_method" title="#getColorById (instance method)">#<strong>getColorById</strong>(id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#getColorsByUser-instance_method" title="#getColorsByUser (instance method)">#<strong>getColorsByUser</strong>(userId)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#getDatabase-instance_method" title="#getDatabase (instance method)">#<strong>getDatabase</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#getSellOrderById-instance_method" title="#getSellOrderById (instance method)">#<strong>getSellOrderById</strong>(id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#getSellOrdersByColorId-instance_method" title="#getSellOrdersByColorId (instance method)">#<strong>getSellOrdersByColorId</strong>(color_id, limit = 5)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#getTopUsersByColor-instance_method" title="#getTopUsersByColor (instance method)">#<strong>getTopUsersByColor</strong>(color_id, limit = 10)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#getUserById-instance_method" title="#getUserById (instance method)">#<strong>getUserById</strong>(id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#getUserByName-instance_method" title="#getUserByName (instance method)">#<strong>getUserByName</strong>(username)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#getUserColorByUser-instance_method" title="#getUserColorByUser (instance method)">#<strong>getUserColorByUser</strong>(userId)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>UserColor ————————————————————-.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#getUserColorByUserAndColor-instance_method" title="#getUserColorByUserAndColor (instance method)">#<strong>getUserColorByUserAndColor</strong>(userId, colorId)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__images_create-instance_method" title="#POST /images/create (instance method)">#<strong>POST /images/create</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__order_create-instance_method" title="#POST /order/create (instance method)">#<strong>POST /order/create</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__order_delete-instance_method" title="#POST /order/delete (instance method)">#<strong>POST /order/delete</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__users_create-instance_method" title="#POST /users/create (instance method)">#<strong>POST /users/create</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__users_login-instance_method" title="#POST /users/login (instance method)">#<strong>POST /users/login</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>users ——————————————————————.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#setUserImageCreated-instance_method" title="#setUserImageCreated (instance method)">#<strong>setUserImageCreated</strong>(time, id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#updateBuyOrder-instance_method" title="#updateBuyOrder (instance method)">#<strong>updateBuyOrder</strong>(id, deltaAmount)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#updateSellOrder-instance_method" title="#updateSellOrder (instance method)">#<strong>updateSellOrder</strong>(id, deltaAmount)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#updateUserColorAmount-instance_method" title="#updateUserColorAmount (instance method)">#<strong>updateUserColorAmount</strong>(userId, colorId, deltaAmount)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#updateUserMoney-instance_method" title="#updateUserMoney (instance method)">#<strong>updateUserMoney</strong>(id, deltaMoney)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="addToColor-instance_method">
  
    #<strong>addToColor</strong>(hexCode)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


61
62
63</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 61</span>

<span class='kw'>def</span> <span class='id identifier rubyid_addToColor'>addToColor</span><span class='lparen'>(</span><span class='id identifier rubyid_hexCode'>hexCode</span><span class='rparen'>)</span>
	<span class='id identifier rubyid_getDatabase'><span class='object_link'><a href="#getDatabase-instance_method" title="#getDatabase (method)">getDatabase</a></span></span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>UPDATE colors SET amount = amount + 1 WHERE hexCode = ?</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_hexCode'>hexCode</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="checkOrders-instance_method">
  
    #<strong>checkOrders</strong>(orderType, orderId)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Transaction ———————————————————–</p>


  </div>
</div>
<div class="tags">
  



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 160</span>

<span class='kw'>def</span> <span class='id identifier rubyid_checkOrders'>checkOrders</span><span class='lparen'>(</span><span class='id identifier rubyid_orderType'>orderType</span><span class='comma'>,</span> <span class='id identifier rubyid_orderId'>orderId</span><span class='rparen'>)</span>
	<span class='kw'>if</span> <span class='id identifier rubyid_orderType'>orderType</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>buy</span><span class='tstring_end'>&#39;</span></span>
		<span class='id identifier rubyid_buyOrder'>buyOrder</span> <span class='op'>=</span> <span class='id identifier rubyid_getBuyOrderById'><span class='object_link'><a href="#getBuyOrderById-instance_method" title="#getBuyOrderById (method)">getBuyOrderById</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_orderId'>orderId</span><span class='rparen'>)</span>
		<span class='id identifier rubyid_buyerId'>buyerId</span> <span class='op'>=</span> <span class='id identifier rubyid_buyOrder'>buyOrder</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>userId</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
		<span class='id identifier rubyid_colorId'>colorId</span> <span class='op'>=</span> <span class='id identifier rubyid_buyOrder'>buyOrder</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>colorId</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
		<span class='id identifier rubyid_getAllSellOrders'><span class='object_link'><a href="#getAllSellOrders-instance_method" title="#getAllSellOrders (method)">getAllSellOrders</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_sellOrder'>sellOrder</span><span class='op'>|</span>
			<span class='kw'>if</span> <span class='id identifier rubyid_sellOrder'>sellOrder</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>price</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_buyOrder'>buyOrder</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>price</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
				<span class='kw'>if</span> <span class='id identifier rubyid_sellOrder'>sellOrder</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>amount</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_buyOrder'>buyOrder</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>amount</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
					<span class='id identifier rubyid_amount'>amount</span> <span class='op'>=</span> <span class='id identifier rubyid_buyOrder'>buyOrder</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>amount</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
				<span class='kw'>else</span>
					<span class='id identifier rubyid_amount'>amount</span> <span class='op'>=</span> <span class='id identifier rubyid_sellOrder'>sellOrder</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>amount</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
				<span class='kw'>end</span>
				<span class='kw'>if</span> <span class='id identifier rubyid_getUserColorByUserAndColor'><span class='object_link'><a href="#getUserColorByUserAndColor-instance_method" title="#getUserColorByUserAndColor (method)">getUserColorByUserAndColor</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_buyerId'>buyerId</span><span class='comma'>,</span> <span class='id identifier rubyid_colorId'>colorId</span><span class='rparen'>)</span>
					<span class='id identifier rubyid_updateUserColorAmount'><span class='object_link'><a href="#updateUserColorAmount-instance_method" title="#updateUserColorAmount (method)">updateUserColorAmount</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_buyerId'>buyerId</span><span class='comma'>,</span> <span class='id identifier rubyid_colorId'>colorId</span><span class='comma'>,</span> <span class='id identifier rubyid_amount'>amount</span><span class='rparen'>)</span>
				<span class='kw'>else</span>
					<span class='id identifier rubyid_createUserColor'><span class='object_link'><a href="#createUserColor-instance_method" title="#createUserColor (method)">createUserColor</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_buyerId'>buyerId</span><span class='comma'>,</span> <span class='id identifier rubyid_colorId'>colorId</span><span class='comma'>,</span> <span class='id identifier rubyid_amount'>amount</span><span class='rparen'>)</span>
				<span class='kw'>end</span>

				<span class='id identifier rubyid_updateSellOrder'><span class='object_link'><a href="#updateSellOrder-instance_method" title="#updateSellOrder (method)">updateSellOrder</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_sellOrder'>sellOrder</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='op'>-</span><span class='id identifier rubyid_amount'>amount</span><span class='rparen'>)</span>
				<span class='id identifier rubyid_updateBuyOrder'><span class='object_link'><a href="#updateBuyOrder-instance_method" title="#updateBuyOrder (method)">updateBuyOrder</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_buyOrder'>buyOrder</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='op'>-</span><span class='id identifier rubyid_amount'>amount</span><span class='rparen'>)</span>

				<span class='id identifier rubyid_updateUserMoney'><span class='object_link'><a href="#updateUserMoney-instance_method" title="#updateUserMoney (method)">updateUserMoney</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_sellOrder'>sellOrder</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>userId</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_sellOrder'>sellOrder</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>price</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='op'>*</span><span class='id identifier rubyid_amount'>amount</span><span class='rparen'>)</span>
				<span class='kw'>if</span> <span class='id identifier rubyid_getBuyOrderById'><span class='object_link'><a href="#getBuyOrderById-instance_method" title="#getBuyOrderById (method)">getBuyOrderById</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_orderId'>orderId</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='kw'>nil</span>
					<span class='kw'>break</span>
				<span class='kw'>else</span> 
					<span class='id identifier rubyid_buyOrder'>buyOrder</span> <span class='op'>=</span> <span class='id identifier rubyid_getBuyOrderById'><span class='object_link'><a href="#getBuyOrderById-instance_method" title="#getBuyOrderById (method)">getBuyOrderById</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_orderId'>orderId</span><span class='rparen'>)</span>
				<span class='kw'>end</span>
			<span class='kw'>end</span>
		<span class='kw'>end</span>
	<span class='kw'>elsif</span> <span class='id identifier rubyid_orderType'>orderType</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sell</span><span class='tstring_end'>&#39;</span></span>
		<span class='id identifier rubyid_sellOrder'>sellOrder</span> <span class='op'>=</span> <span class='id identifier rubyid_getSellOrderById'><span class='object_link'><a href="#getSellOrderById-instance_method" title="#getSellOrderById (method)">getSellOrderById</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_orderId'>orderId</span><span class='rparen'>)</span>
		<span class='id identifier rubyid_sellerId'>sellerId</span> <span class='op'>=</span> <span class='id identifier rubyid_sellOrder'>sellOrder</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>userId</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
		<span class='id identifier rubyid_colorId'>colorId</span> <span class='op'>=</span> <span class='id identifier rubyid_sellOrder'>sellOrder</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>colorId</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
		<span class='id identifier rubyid_getAllBuyOrders'><span class='object_link'><a href="#getAllBuyOrders-instance_method" title="#getAllBuyOrders (method)">getAllBuyOrders</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_buyOrder'>buyOrder</span><span class='op'>|</span>
			<span class='kw'>if</span> <span class='id identifier rubyid_buyOrder'>buyOrder</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>price</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='id identifier rubyid_sellOrder'>sellOrder</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>price</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
				<span class='kw'>if</span> <span class='id identifier rubyid_buyOrder'>buyOrder</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>amount</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_sellOrder'>sellOrder</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>amount</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
					<span class='id identifier rubyid_amount'>amount</span> <span class='op'>=</span> <span class='id identifier rubyid_sellOrder'>sellOrder</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>amount</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
				<span class='kw'>else</span>
					<span class='id identifier rubyid_amount'>amount</span> <span class='op'>=</span> <span class='id identifier rubyid_buyOrder'>buyOrder</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>amount</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
				<span class='kw'>end</span>

				<span class='kw'>if</span> <span class='id identifier rubyid_getUserColorByUserAndColor'><span class='object_link'><a href="#getUserColorByUserAndColor-instance_method" title="#getUserColorByUserAndColor (method)">getUserColorByUserAndColor</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_buyOrder'>buyOrder</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>userId</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_colorId'>colorId</span><span class='rparen'>)</span>
					<span class='id identifier rubyid_updateUserColorAmount'><span class='object_link'><a href="#updateUserColorAmount-instance_method" title="#updateUserColorAmount (method)">updateUserColorAmount</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_buyOrder'>buyOrder</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>userId</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_colorId'>colorId</span><span class='comma'>,</span> <span class='id identifier rubyid_amount'>amount</span><span class='rparen'>)</span>
				<span class='kw'>else</span>
					<span class='id identifier rubyid_createUserColor'><span class='object_link'><a href="#createUserColor-instance_method" title="#createUserColor (method)">createUserColor</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_buyOrder'>buyOrder</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>userId</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_colorId'>colorId</span><span class='comma'>,</span> <span class='id identifier rubyid_amount'>amount</span><span class='rparen'>)</span>
				<span class='kw'>end</span>

				<span class='id identifier rubyid_updateBuyOrder'><span class='object_link'><a href="#updateBuyOrder-instance_method" title="#updateBuyOrder (method)">updateBuyOrder</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_buyOrder'>buyOrder</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='op'>-</span><span class='id identifier rubyid_amount'>amount</span><span class='rparen'>)</span>
				<span class='id identifier rubyid_updateSellOrder'><span class='object_link'><a href="#updateSellOrder-instance_method" title="#updateSellOrder (method)">updateSellOrder</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_sellOrder'>sellOrder</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='op'>-</span><span class='id identifier rubyid_amount'>amount</span><span class='rparen'>)</span>

				<span class='id identifier rubyid_updateUserMoney'><span class='object_link'><a href="#updateUserMoney-instance_method" title="#updateUserMoney (method)">updateUserMoney</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_sellerId'>sellerId</span><span class='comma'>,</span> <span class='id identifier rubyid_sellOrder'>sellOrder</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>price</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='id identifier rubyid_amount'>amount</span><span class='rparen'>)</span>
				<span class='kw'>if</span> <span class='id identifier rubyid_getSellOrderById'><span class='object_link'><a href="#getSellOrderById-instance_method" title="#getSellOrderById (method)">getSellOrderById</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_orderId'>orderId</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='kw'>nil</span>
					<span class='kw'>break</span>
				<span class='kw'>else</span> 
					<span class='id identifier rubyid_sellOrder'>sellOrder</span> <span class='op'>=</span> <span class='id identifier rubyid_getSellOrderById'><span class='object_link'><a href="#getSellOrderById-instance_method" title="#getSellOrderById (method)">getSellOrderById</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_orderId'>orderId</span><span class='rparen'>)</span>
				<span class='kw'>end</span>
			<span class='kw'>end</span>
		<span class='kw'>end</span>
	<span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="createBuyOrder-instance_method">
  
    #<strong>createBuyOrder</strong>(userId, colorId, price, amount)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


108
109
110</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 108</span>

<span class='kw'>def</span> <span class='id identifier rubyid_createBuyOrder'>createBuyOrder</span><span class='lparen'>(</span><span class='id identifier rubyid_userId'>userId</span><span class='comma'>,</span> <span class='id identifier rubyid_colorId'>colorId</span><span class='comma'>,</span> <span class='id identifier rubyid_price'>price</span><span class='comma'>,</span> <span class='id identifier rubyid_amount'>amount</span><span class='rparen'>)</span>
	<span class='id identifier rubyid_getDatabase'><span class='object_link'><a href="#getDatabase-instance_method" title="#getDatabase (method)">getDatabase</a></span></span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>INSERT INTO buyOrders (userId, colorId, price, amount) VALUES (?, ?, ?, ?)</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_userId'>userId</span><span class='comma'>,</span> <span class='id identifier rubyid_colorId'>colorId</span><span class='comma'>,</span> <span class='id identifier rubyid_price'>price</span><span class='comma'>,</span> <span class='id identifier rubyid_amount'>amount</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="createColor-instance_method">
  
    #<strong>createColor</strong>(hexCode)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


57
58
59</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 57</span>

<span class='kw'>def</span> <span class='id identifier rubyid_createColor'>createColor</span><span class='lparen'>(</span><span class='id identifier rubyid_hexCode'>hexCode</span><span class='rparen'>)</span>
	<span class='id identifier rubyid_getDatabase'><span class='object_link'><a href="#getDatabase-instance_method" title="#getDatabase (method)">getDatabase</a></span></span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>INSERT INTO colors (hexCode, amount) VALUES (?, ?)</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_hexCode'>hexCode</span><span class='comma'>,</span> <span class='int'>1</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="createSellOrder-instance_method">
  
    #<strong>createSellOrder</strong>(userId, colorId, price, amount)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


112
113
114</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 112</span>

<span class='kw'>def</span> <span class='id identifier rubyid_createSellOrder'>createSellOrder</span><span class='lparen'>(</span><span class='id identifier rubyid_userId'>userId</span><span class='comma'>,</span> <span class='id identifier rubyid_colorId'>colorId</span><span class='comma'>,</span> <span class='id identifier rubyid_price'>price</span><span class='comma'>,</span> <span class='id identifier rubyid_amount'>amount</span><span class='rparen'>)</span>
	<span class='id identifier rubyid_getDatabase'><span class='object_link'><a href="#getDatabase-instance_method" title="#getDatabase (method)">getDatabase</a></span></span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>INSERT INTO sellOrders (userId, colorId, price, amount) VALUES (?, ?, ?, ?)</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_userId'>userId</span><span class='comma'>,</span> <span class='id identifier rubyid_colorId'>colorId</span><span class='comma'>,</span> <span class='id identifier rubyid_price'>price</span><span class='comma'>,</span> <span class='id identifier rubyid_amount'>amount</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="createUser-instance_method">
  
    #<strong>createUser</strong>(username, password, adminLevel)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


28
29
30</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 28</span>

<span class='kw'>def</span> <span class='id identifier rubyid_createUser'>createUser</span><span class='lparen'>(</span><span class='id identifier rubyid_username'>username</span><span class='comma'>,</span> <span class='id identifier rubyid_password'>password</span><span class='comma'>,</span> <span class='id identifier rubyid_adminLevel'>adminLevel</span><span class='rparen'>)</span>
	<span class='id identifier rubyid_getDatabase'><span class='object_link'><a href="#getDatabase-instance_method" title="#getDatabase (method)">getDatabase</a></span></span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>INSERT INTO users (username, password, money, imageCreated, admin) VALUES (?,?,?,?,?)</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_username'>username</span><span class='comma'>,</span> <span class='id identifier rubyid_password'>password</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='id identifier rubyid_adminLevel'>adminLevel</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="createUserColor-instance_method">
  
    #<strong>createUserColor</strong>(userId, colorId, amount)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


151
152
153</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 151</span>

<span class='kw'>def</span> <span class='id identifier rubyid_createUserColor'>createUserColor</span><span class='lparen'>(</span><span class='id identifier rubyid_userId'>userId</span><span class='comma'>,</span> <span class='id identifier rubyid_colorId'>colorId</span><span class='comma'>,</span> <span class='id identifier rubyid_amount'>amount</span><span class='rparen'>)</span>
	<span class='id identifier rubyid_getDatabase'><span class='object_link'><a href="#getDatabase-instance_method" title="#getDatabase (method)">getDatabase</a></span></span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>INSERT INTO userColor (userId, amount, colorId) VALUES (?, ?, ?)</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_userId'>userId</span><span class='comma'>,</span> <span class='id identifier rubyid_amount'>amount</span><span class='comma'>,</span> <span class='id identifier rubyid_colorId'>colorId</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="deleteBuyOrder-instance_method">
  
    #<strong>deleteBuyOrder</strong>(id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


116
117
118
119
120</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 116</span>

<span class='kw'>def</span> <span class='id identifier rubyid_deleteBuyOrder'>deleteBuyOrder</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
	<span class='id identifier rubyid_buyOrder'>buyOrder</span> <span class='op'>=</span> <span class='id identifier rubyid_getBuyOrderById'><span class='object_link'><a href="#getBuyOrderById-instance_method" title="#getBuyOrderById (method)">getBuyOrderById</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
	<span class='id identifier rubyid_updateUserMoney'><span class='object_link'><a href="#updateUserMoney-instance_method" title="#updateUserMoney (method)">updateUserMoney</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_buyOrder'>buyOrder</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>userId</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_buyOrder'>buyOrder</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>price</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>*</span> <span class='id identifier rubyid_buyOrder'>buyOrder</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>amount</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
	<span class='id identifier rubyid_getDatabase'><span class='object_link'><a href="#getDatabase-instance_method" title="#getDatabase (method)">getDatabase</a></span></span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>DELETE FROM buyOrders WHERE id = ?</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="deleteSellOrder-instance_method">
  
    #<strong>deleteSellOrder</strong>(id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


122
123
124
125
126</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 122</span>

<span class='kw'>def</span> <span class='id identifier rubyid_deleteSellOrder'>deleteSellOrder</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
	<span class='id identifier rubyid_sellOrder'>sellOrder</span> <span class='op'>=</span> <span class='id identifier rubyid_getSellOrderById'><span class='object_link'><a href="#getSellOrderById-instance_method" title="#getSellOrderById (method)">getSellOrderById</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
	<span class='id identifier rubyid_updateUserColorAmount'><span class='object_link'><a href="#updateUserColorAmount-instance_method" title="#updateUserColorAmount (method)">updateUserColorAmount</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_sellOrder'>sellOrder</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>userId</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_sellOrder'>sellOrder</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>colorId</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_sellOrder'>sellOrder</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>amount</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
	<span class='id identifier rubyid_getDatabase'><span class='object_link'><a href="#getDatabase-instance_method" title="#getDatabase (method)">getDatabase</a></span></span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>DELETE FROM sellOrders WHERE id = ?</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__-instance_method">
  
    #<strong>GET /</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


33
34
35</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 33</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
	<span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/home</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__home-instance_method">
  
    #<strong>GET /home</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Display the home page</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>Model#getUserById</li>
    
      <li>Model#getColorsByUser</li>
    
      <li>Model#getUserColorByUser</li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


42
43
44
45
46
47</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 42</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/home</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
	<span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='id identifier rubyid_getUserById'><span class='object_link'><a href="#getUserById-instance_method" title="#getUserById (method)">getUserById</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:userId</span><span class='rbracket'>]</span><span class='rparen'>)</span>
	<span class='id identifier rubyid_colors'>colors</span> <span class='op'>=</span> <span class='id identifier rubyid_getColorsByUser'><span class='object_link'><a href="#getColorsByUser-instance_method" title="#getColorsByUser (method)">getColorsByUser</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:userId</span><span class='rbracket'>]</span><span class='rparen'>)</span>
	<span class='id identifier rubyid_userColors'>userColors</span> <span class='op'>=</span> <span class='id identifier rubyid_getUserColorByUser'><span class='object_link'><a href="#getUserColorByUser-instance_method" title="#getUserColorByUser (method)">getUserColorByUser</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:userId</span><span class='rbracket'>]</span><span class='rparen'>)</span>
	<span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:home</span><span class='comma'>,</span> <span class='label'>locals:</span><span class='lbrace'>{</span><span class='label'>user:</span><span class='id identifier rubyid_user'>user</span><span class='comma'>,</span> <span class='label'>colors:</span><span class='id identifier rubyid_colors'>colors</span><span class='comma'>,</span> <span class='label'>userColors:</span><span class='id identifier rubyid_userColors'>userColors</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__images-instance_method">
  
    #<strong>GET /images</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Display the images page</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>Model#getAllColors</li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


180
181
182
183
184</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 180</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/images</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
	<span class='comment'># Sorterbar efter olika kolumner
</span>	<span class='id identifier rubyid_colors'>colors</span> <span class='op'>=</span> <span class='id identifier rubyid_getAllColors'><span class='object_link'><a href="#getAllColors-instance_method" title="#getAllColors (method)">getAllColors</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
	<span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&#39;images/index&#39;</span><span class='comma'>,</span> <span class='label'>locals:</span><span class='lbrace'>{</span><span class='label'>colors:</span><span class='id identifier rubyid_colors'>colors</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__images_new-instance_method">
  
    #<strong>GET /images/new</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Display the create image page</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>Model#getUserById</li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


216
217
218
219
220
221
222
223
224
225
226
227
228</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 216</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/images/new</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
	<span class='kw'>if</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:userId</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='kw'>nil</span>
		<span class='id identifier rubyid_flash'>flash</span><span class='lbracket'>[</span><span class='symbol'>:loginRequired</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>You need to be logged in to create an image</span><span class='tstring_end'>&#39;</span></span>
		<span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:redirect</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/images/new</span><span class='tstring_end'>&#39;</span></span>
		<span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users/login</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
	<span class='kw'>end</span>

	<span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='id identifier rubyid_getUserById'><span class='object_link'><a href="#getUserById-instance_method" title="#getUserById (method)">getUserById</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:userId</span><span class='rbracket'>]</span><span class='rparen'>)</span>
	<span class='id identifier rubyid_timeSinceLastImage'>timeSinceLastImage</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>-</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>imageCreated</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
	<span class='id identifier rubyid_timeUntilNextImage'>timeUntilNextImage</span> <span class='op'>=</span> <span class='int'>60</span><span class='op'>*</span><span class='int'>60</span><span class='op'>*</span><span class='int'>24</span> <span class='op'>-</span> <span class='id identifier rubyid_timeSinceLastImage'>timeSinceLastImage</span>

	<span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&#39;images/new&#39;</span><span class='comma'>,</span> <span class='label'>locals:</span><span class='lbrace'>{</span><span class='label'>timeUntilNextImage:</span><span class='id identifier rubyid_timeUntilNextImage'>timeUntilNextImage</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__images_show__id-instance_method">
  
    #<strong>GET /images/show/:id</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Display a specific image page</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the id of the image to display</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>Model#getColorById</li>
    
      <li>Model#getAllUsers</li>
    
      <li>Model#getAllSellOrdersFromUserAndColor</li>
    
      <li>Model#getAllBuyOrdersFromUserAndColor</li>
    
      <li>Model#getSellOrdersByColorId</li>
    
      <li>Model#getBuyOrdersByColorId</li>
    
      <li>Model#getTopUsersByColor</li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


240
241
242
243
244
245
246
247
248
249
250
251
252
253</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 240</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/images/show/:id</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
	<span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
	<span class='id identifier rubyid_color'>color</span> <span class='op'>=</span> <span class='id identifier rubyid_getColorById'><span class='object_link'><a href="#getColorById-instance_method" title="#getColorById (method)">getColorById</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
	<span class='id identifier rubyid_users'>users</span> <span class='op'>=</span> <span class='id identifier rubyid_getAllUsers'><span class='object_link'><a href="#getAllUsers-instance_method" title="#getAllUsers (method)">getAllUsers</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
	
	<span class='kw'>if</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:userId</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='kw'>nil</span>
		<span class='id identifier rubyid_userSellOrders'>userSellOrders</span> <span class='op'>=</span> <span class='id identifier rubyid_getAllSellOrdersFromUserAndColor'><span class='object_link'><a href="#getAllSellOrdersFromUserAndColor-instance_method" title="#getAllSellOrdersFromUserAndColor (method)">getAllSellOrdersFromUserAndColor</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:userId</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
		<span class='id identifier rubyid_userBuyOrders'>userBuyOrders</span> <span class='op'>=</span> <span class='id identifier rubyid_getAllBuyOrdersFromUserAndColor'><span class='object_link'><a href="#getAllBuyOrdersFromUserAndColor-instance_method" title="#getAllBuyOrdersFromUserAndColor (method)">getAllBuyOrdersFromUserAndColor</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:userId</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
	<span class='kw'>end</span>
	<span class='id identifier rubyid_colorSellOrders'>colorSellOrders</span> <span class='op'>=</span> <span class='id identifier rubyid_getSellOrdersByColorId'><span class='object_link'><a href="#getSellOrdersByColorId-instance_method" title="#getSellOrdersByColorId (method)">getSellOrdersByColorId</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
	<span class='id identifier rubyid_colorBuyOrders'>colorBuyOrders</span> <span class='op'>=</span> <span class='id identifier rubyid_getBuyOrdersByColorId'><span class='object_link'><a href="#getBuyOrdersByColorId-instance_method" title="#getBuyOrdersByColorId (method)">getBuyOrdersByColorId</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
	<span class='id identifier rubyid_toplist'>toplist</span> <span class='op'>=</span> <span class='id identifier rubyid_getTopUsersByColor'><span class='object_link'><a href="#getTopUsersByColor-instance_method" title="#getTopUsersByColor (method)">getTopUsersByColor</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
	<span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&#39;images/show&#39;</span><span class='comma'>,</span> <span class='label'>locals:</span><span class='lbrace'>{</span><span class='label'>color:</span><span class='id identifier rubyid_color'>color</span><span class='comma'>,</span> <span class='label'>users:</span><span class='id identifier rubyid_users'>users</span><span class='comma'>,</span> <span class='label'>userSellOrders:</span><span class='id identifier rubyid_userSellOrders'>userSellOrders</span><span class='comma'>,</span> <span class='label'>userBuyOrders:</span><span class='id identifier rubyid_userBuyOrders'>userBuyOrders</span><span class='comma'>,</span> <span class='label'>sellOrders:</span><span class='id identifier rubyid_colorSellOrders'>colorSellOrders</span><span class='comma'>,</span> <span class='label'>buyOrders:</span><span class='id identifier rubyid_colorBuyOrders'>colorBuyOrders</span><span class='comma'>,</span> <span class='label'>toplist:</span><span class='id identifier rubyid_toplist'>toplist</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__stats-instance_method">
  
    #<strong>GET /stats</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Display the stats page</p>


  </div>
</div>
<div class="tags">
  



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


314
315
316</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 314</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/stats</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
	<span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&#39;stats/index&#39;</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__users_login-instance_method">
  
    #<strong>GET /users/login</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Display the login page</p>


  </div>
</div>
<div class="tags">
  



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


104
105
106</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 104</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users/login</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
	<span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&#39;users/login&#39;</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__users_logout-instance_method">
  
    #<strong>GET /users/logout</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


97
98
99
100</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 97</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users/logout</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
	<span class='id identifier rubyid_session'>session</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>
	<span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/home</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__users_new-instance_method">
  
    #<strong>GET /users/new</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Display the register page</p>


  </div>
</div>
<div class="tags">
  



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


163
164
165</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 163</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users/new</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
	<span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&#39;users/new&#39;</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET_users_show__id-instance_method">
  
    #<strong>GET users/show/:id</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Display a specific user page</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the id of the user to display</p>
</div>
      
    </li>
  
</ul>




</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


170
171
172
173</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 170</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>users/show/:id</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
	<span class='id identifier rubyid_userId'>userId</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
	<span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&#39;users/show&#39;</span><span class='comma'>,</span> <span class='label'>locals:</span><span class='lbrace'>{</span><span class='label'>id:</span><span class='id identifier rubyid_userId'>userId</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getAllBuyOrders-instance_method">
  
    #<strong>getAllBuyOrders</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Orders —————————————————————-</p>


  </div>
</div>
<div class="tags">
  



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


66
67
68</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 66</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getAllBuyOrders'>getAllBuyOrders</span><span class='lparen'>(</span><span class='rparen'>)</span>
	<span class='kw'>return</span> <span class='id identifier rubyid_getDatabase'><span class='object_link'><a href="#getDatabase-instance_method" title="#getDatabase (method)">getDatabase</a></span></span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SELECT * FROM buyOrders</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getAllBuyOrdersFromUser-instance_method">
  
    #<strong>getAllBuyOrdersFromUser</strong>(id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


82
83
84</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 82</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getAllBuyOrdersFromUser'>getAllBuyOrdersFromUser</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
	<span class='kw'>return</span> <span class='id identifier rubyid_getDatabase'><span class='object_link'><a href="#getDatabase-instance_method" title="#getDatabase (method)">getDatabase</a></span></span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SELECT * FROM buyOrders WHERE userId = ?</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getAllBuyOrdersFromUserAndColor-instance_method">
  
    #<strong>getAllBuyOrdersFromUserAndColor</strong>(id, colorId)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


90
91
92</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 90</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getAllBuyOrdersFromUserAndColor'>getAllBuyOrdersFromUserAndColor</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_colorId'>colorId</span><span class='rparen'>)</span>
	<span class='kw'>return</span> <span class='id identifier rubyid_getDatabase'><span class='object_link'><a href="#getDatabase-instance_method" title="#getDatabase (method)">getDatabase</a></span></span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SELECT * FROM buyOrders WHERE userId = ? AND colorId = ?</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_colorId'>colorId</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getAllColors-instance_method">
  
    #<strong>getAllColors</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Colors —————————————————————-</p>


  </div>
</div>
<div class="tags">
  



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


41
42
43</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 41</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getAllColors'>getAllColors</span><span class='lparen'>(</span><span class='rparen'>)</span>
	<span class='kw'>return</span> <span class='id identifier rubyid_getDatabase'><span class='object_link'><a href="#getDatabase-instance_method" title="#getDatabase (method)">getDatabase</a></span></span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SELECT * FROM colors</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getAllSellOrders-instance_method">
  
    #<strong>getAllSellOrders</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


70
71
72</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 70</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getAllSellOrders'>getAllSellOrders</span><span class='lparen'>(</span><span class='rparen'>)</span>
	<span class='kw'>return</span> <span class='id identifier rubyid_getDatabase'><span class='object_link'><a href="#getDatabase-instance_method" title="#getDatabase (method)">getDatabase</a></span></span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SELECT * FROM sellOrders</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getAllSellOrdersFromUser-instance_method">
  
    #<strong>getAllSellOrdersFromUser</strong>(id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


86
87
88</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 86</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getAllSellOrdersFromUser'>getAllSellOrdersFromUser</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
	<span class='kw'>return</span> <span class='id identifier rubyid_getDatabase'><span class='object_link'><a href="#getDatabase-instance_method" title="#getDatabase (method)">getDatabase</a></span></span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SELECT * FROM sellOrders WHERE userId = ?</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getAllSellOrdersFromUserAndColor-instance_method">
  
    #<strong>getAllSellOrdersFromUserAndColor</strong>(id, colorId)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


94
95
96</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 94</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getAllSellOrdersFromUserAndColor'>getAllSellOrdersFromUserAndColor</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_colorId'>colorId</span><span class='rparen'>)</span>
	<span class='kw'>return</span> <span class='id identifier rubyid_getDatabase'><span class='object_link'><a href="#getDatabase-instance_method" title="#getDatabase (method)">getDatabase</a></span></span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SELECT * FROM sellOrders WHERE userId = ? AND colorId = ?</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_colorId'>colorId</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getAllUsers-instance_method">
  
    #<strong>getAllUsers</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Users —————————————————————–</p>


  </div>
</div>
<div class="tags">
  



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


11
12
13</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 11</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getAllUsers'>getAllUsers</span><span class='lparen'>(</span><span class='rparen'>)</span>
	<span class='kw'>return</span> <span class='id identifier rubyid_getDatabase'><span class='object_link'><a href="#getDatabase-instance_method" title="#getDatabase (method)">getDatabase</a></span></span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SELECT * FROM users</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getBuyOrderById-instance_method">
  
    #<strong>getBuyOrderById</strong>(id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


74
75
76</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 74</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getBuyOrderById'>getBuyOrderById</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
	<span class='kw'>return</span> <span class='id identifier rubyid_getDatabase'><span class='object_link'><a href="#getDatabase-instance_method" title="#getDatabase (method)">getDatabase</a></span></span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SELECT * FROM buyOrders WHERE id = ?</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getBuyOrdersByColorId-instance_method">
  
    #<strong>getBuyOrdersByColorId</strong>(color_id, limit = 5)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


103
104
105
106</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 103</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getBuyOrdersByColorId'>getBuyOrdersByColorId</span><span class='lparen'>(</span><span class='id identifier rubyid_color_id'>color_id</span><span class='comma'>,</span> <span class='id identifier rubyid_limit'>limit</span> <span class='op'>=</span> <span class='int'>5</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_db'>db</span> <span class='op'>=</span> <span class='id identifier rubyid_getDatabase'><span class='object_link'><a href="#getDatabase-instance_method" title="#getDatabase (method)">getDatabase</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_db'>db</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT * FROM buyOrders WHERE colorId = ? ORDER BY price DESC LIMIT ?</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_color_id'>color_id</span><span class='comma'>,</span> <span class='id identifier rubyid_limit'>limit</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getColorByHexcode-instance_method">
  
    #<strong>getColorByHexcode</strong>(hexCode)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


53
54
55</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 53</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getColorByHexcode'>getColorByHexcode</span><span class='lparen'>(</span><span class='id identifier rubyid_hexCode'>hexCode</span><span class='rparen'>)</span>
	<span class='kw'>return</span> <span class='id identifier rubyid_getDatabase'><span class='object_link'><a href="#getDatabase-instance_method" title="#getDatabase (method)">getDatabase</a></span></span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SELECT * FROM colors WHERE hexCode = ?</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_hexCode'>hexCode</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getColorById-instance_method">
  
    #<strong>getColorById</strong>(id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


45
46
47</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 45</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getColorById'>getColorById</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
	<span class='kw'>return</span> <span class='id identifier rubyid_getDatabase'><span class='object_link'><a href="#getDatabase-instance_method" title="#getDatabase (method)">getDatabase</a></span></span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SELECT * FROM colors WHERE id = ?</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getColorsByUser-instance_method">
  
    #<strong>getColorsByUser</strong>(userId)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


49
50
51</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 49</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getColorsByUser'>getColorsByUser</span><span class='lparen'>(</span><span class='id identifier rubyid_userId'>userId</span><span class='rparen'>)</span>
	<span class='kw'>return</span> <span class='id identifier rubyid_getDatabase'><span class='object_link'><a href="#getDatabase-instance_method" title="#getDatabase (method)">getDatabase</a></span></span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SELECT * FROM colors WHERE id IN (SELECT colorId FROM userColor WHERE userId = ?)</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_userId'>userId</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getDatabase-instance_method">
  
    #<strong>getDatabase</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


4
5
6
7
8</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 4</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getDatabase'>getDatabase</span><span class='lparen'>(</span><span class='rparen'>)</span>
	<span class='id identifier rubyid_db'>db</span> <span class='op'>=</span> <span class='const'>SQLite3</span><span class='op'>::</span><span class='const'>Database</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>db/database.db</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
	<span class='id identifier rubyid_db'>db</span><span class='period'>.</span><span class='id identifier rubyid_results_as_hash'>results_as_hash</span> <span class='op'>=</span> <span class='kw'>true</span>
	<span class='kw'>return</span> <span class='id identifier rubyid_db'>db</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getSellOrderById-instance_method">
  
    #<strong>getSellOrderById</strong>(id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


78
79
80</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 78</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getSellOrderById'>getSellOrderById</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
	<span class='kw'>return</span> <span class='id identifier rubyid_getDatabase'><span class='object_link'><a href="#getDatabase-instance_method" title="#getDatabase (method)">getDatabase</a></span></span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SELECT * FROM sellOrders WHERE id = ?</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getSellOrdersByColorId-instance_method">
  
    #<strong>getSellOrdersByColorId</strong>(color_id, limit = 5)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


98
99
100
101</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 98</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getSellOrdersByColorId'>getSellOrdersByColorId</span><span class='lparen'>(</span><span class='id identifier rubyid_color_id'>color_id</span><span class='comma'>,</span> <span class='id identifier rubyid_limit'>limit</span> <span class='op'>=</span> <span class='int'>5</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_db'>db</span> <span class='op'>=</span> <span class='id identifier rubyid_getDatabase'><span class='object_link'><a href="#getDatabase-instance_method" title="#getDatabase (method)">getDatabase</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_db'>db</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT * FROM sellOrders WHERE colorId = ? ORDER BY price ASC LIMIT ?</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_color_id'>color_id</span><span class='comma'>,</span> <span class='id identifier rubyid_limit'>limit</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getTopUsersByColor-instance_method">
  
    #<strong>getTopUsersByColor</strong>(color_id, limit = 10)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


23
24
25
26</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 23</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getTopUsersByColor'>getTopUsersByColor</span><span class='lparen'>(</span><span class='id identifier rubyid_color_id'>color_id</span><span class='comma'>,</span> <span class='id identifier rubyid_limit'>limit</span> <span class='op'>=</span> <span class='int'>10</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_db'>db</span> <span class='op'>=</span> <span class='id identifier rubyid_getDatabase'><span class='object_link'><a href="#getDatabase-instance_method" title="#getDatabase (method)">getDatabase</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_db'>db</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT * FROM users WHERE id IN (SELECT userId FROM userColor WHERE colorId = ? ORDER BY amount DESC LIMIT ?)</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_color_id'>color_id</span><span class='comma'>,</span> <span class='id identifier rubyid_limit'>limit</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getUserById-instance_method">
  
    #<strong>getUserById</strong>(id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


15
16
17</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 15</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getUserById'>getUserById</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
	<span class='kw'>return</span> <span class='id identifier rubyid_getDatabase'><span class='object_link'><a href="#getDatabase-instance_method" title="#getDatabase (method)">getDatabase</a></span></span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SELECT * FROM users WHERE id = ?</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getUserByName-instance_method">
  
    #<strong>getUserByName</strong>(username)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


19
20
21</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 19</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getUserByName'>getUserByName</span><span class='lparen'>(</span><span class='id identifier rubyid_username'>username</span><span class='rparen'>)</span>
	<span class='kw'>return</span> <span class='id identifier rubyid_getDatabase'><span class='object_link'><a href="#getDatabase-instance_method" title="#getDatabase (method)">getDatabase</a></span></span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SELECT * FROM users WHERE username = ?</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_username'>username</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getUserColorByUser-instance_method">
  
    #<strong>getUserColorByUser</strong>(userId)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>UserColor ————————————————————-</p>


  </div>
</div>
<div class="tags">
  



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


143
144
145</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 143</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getUserColorByUser'>getUserColorByUser</span><span class='lparen'>(</span><span class='id identifier rubyid_userId'>userId</span><span class='rparen'>)</span>
	<span class='kw'>return</span> <span class='id identifier rubyid_getDatabase'><span class='object_link'><a href="#getDatabase-instance_method" title="#getDatabase (method)">getDatabase</a></span></span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SELECT * FROM userColor WHERE userId = ?</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_userId'>userId</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getUserColorByUserAndColor-instance_method">
  
    #<strong>getUserColorByUserAndColor</strong>(userId, colorId)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


147
148
149</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 147</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getUserColorByUserAndColor'>getUserColorByUserAndColor</span><span class='lparen'>(</span><span class='id identifier rubyid_userId'>userId</span><span class='comma'>,</span> <span class='id identifier rubyid_colorId'>colorId</span><span class='rparen'>)</span>
	<span class='kw'>return</span> <span class='id identifier rubyid_getDatabase'><span class='object_link'><a href="#getDatabase-instance_method" title="#getDatabase (method)">getDatabase</a></span></span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>SELECT * FROM userColor WHERE userId = ? AND colorId = ?</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_userId'>userId</span><span class='comma'>,</span> <span class='id identifier rubyid_colorId'>colorId</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__images_create-instance_method">
  
    #<strong>POST /images/create</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 186</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/images/create</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
	<span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='id identifier rubyid_getUserById'><span class='object_link'><a href="#getUserById-instance_method" title="#getUserById (method)">getUserById</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:userId</span><span class='rbracket'>]</span><span class='rparen'>)</span>
	<span class='id identifier rubyid_timeSinceLastImage'>timeSinceLastImage</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='op'>-</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>imageCreated</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
	<span class='kw'>if</span> <span class='id identifier rubyid_timeSinceLastImage'>timeSinceLastImage</span> <span class='op'>&lt;</span> <span class='int'>60</span><span class='op'>*</span><span class='int'>60</span><span class='op'>*</span><span class='int'>24</span>
		<span class='id identifier rubyid_flash'>flash</span><span class='lbracket'>[</span><span class='symbol'>:imageError</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>You can only create one image per day</span><span class='tstring_end'>&#39;</span></span>
		<span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/images/new</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
	<span class='kw'>end</span>

	<span class='id identifier rubyid_setUserImageCreated'><span class='object_link'><a href="#setUserImageCreated-instance_method" title="#setUserImageCreated (method)">setUserImageCreated</a></span></span><span class='lparen'>(</span><span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='comma'>,</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:userId</span><span class='rbracket'>]</span><span class='rparen'>)</span>

	<span class='id identifier rubyid_hexCode'>hexCode</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:hexCode</span><span class='rbracket'>]</span>
	<span class='kw'>if</span> <span class='id identifier rubyid_getColorByHexcode'><span class='object_link'><a href="#getColorByHexcode-instance_method" title="#getColorByHexcode (method)">getColorByHexcode</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_hexCode'>hexCode</span><span class='rparen'>)</span>
		<span class='id identifier rubyid_addToColor'><span class='object_link'><a href="#addToColor-instance_method" title="#addToColor (method)">addToColor</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_hexCode'>hexCode</span><span class='rparen'>)</span>
	<span class='kw'>else</span>
		<span class='id identifier rubyid_createColor'><span class='object_link'><a href="#createColor-instance_method" title="#createColor (method)">createColor</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_hexCode'>hexCode</span><span class='rparen'>)</span>
	<span class='kw'>end</span>

	<span class='id identifier rubyid_colorId'>colorId</span> <span class='op'>=</span> <span class='id identifier rubyid_getColorByHexcode'><span class='object_link'><a href="#getColorByHexcode-instance_method" title="#getColorByHexcode (method)">getColorByHexcode</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_hexCode'>hexCode</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
	<span class='kw'>if</span> <span class='id identifier rubyid_getUserColorByUserAndColor'><span class='object_link'><a href="#getUserColorByUserAndColor-instance_method" title="#getUserColorByUserAndColor (method)">getUserColorByUserAndColor</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_colorId'>colorId</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='kw'>nil</span>
		<span class='id identifier rubyid_createUserColor'><span class='object_link'><a href="#createUserColor-instance_method" title="#createUserColor (method)">createUserColor</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_colorId'>colorId</span><span class='comma'>,</span> <span class='int'>1</span><span class='rparen'>)</span>
	<span class='kw'>else</span>
		<span class='id identifier rubyid_updateUserColorAmount'><span class='object_link'><a href="#updateUserColorAmount-instance_method" title="#updateUserColorAmount (method)">updateUserColorAmount</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_colorId'>colorId</span><span class='comma'>,</span> <span class='int'>1</span><span class='rparen'>)</span>
	<span class='kw'>end</span>

	<span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/images</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__order_create-instance_method">
  
    #<strong>POST /order/create</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 255</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/order/create</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
	<span class='kw'>if</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:userId</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='kw'>nil</span>
		<span class='id identifier rubyid_flash'>flash</span><span class='lbracket'>[</span><span class='symbol'>:loginRequired</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>You need to be logged in to create an order</span><span class='tstring_end'>&#39;</span></span>
		<span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:redirect</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/images/show/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:colorId</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
		<span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users/login</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
	<span class='kw'>end</span>

	<span class='id identifier rubyid_userId'>userId</span> <span class='op'>=</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:userId</span><span class='rbracket'>]</span>
	<span class='id identifier rubyid_colorId'>colorId</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:colorId</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
	<span class='id identifier rubyid_price'>price</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:price</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
	<span class='id identifier rubyid_amount'>amount</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:amount</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
	<span class='id identifier rubyid_orderType'>orderType</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:orderType</span><span class='rbracket'>]</span>

	<span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='id identifier rubyid_getUserById'><span class='object_link'><a href="#getUserById-instance_method" title="#getUserById (method)">getUserById</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_userId'>userId</span><span class='rparen'>)</span>
	<span class='id identifier rubyid_userAmountOfColor'>userAmountOfColor</span> <span class='op'>=</span> <span class='id identifier rubyid_getUserColorByUserAndColor'><span class='object_link'><a href="#getUserColorByUserAndColor-instance_method" title="#getUserColorByUserAndColor (method)">getUserColorByUserAndColor</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_userId'>userId</span><span class='comma'>,</span> <span class='id identifier rubyid_colorId'>colorId</span><span class='rparen'>)</span>

	<span class='kw'>if</span> <span class='id identifier rubyid_orderType'>orderType</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Buy</span><span class='tstring_end'>&#39;</span></span>
		<span class='kw'>if</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>money</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_price'>price</span><span class='op'>*</span><span class='id identifier rubyid_amount'>amount</span>
			<span class='id identifier rubyid_flash'>flash</span><span class='lbracket'>[</span><span class='symbol'>:orderError</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Not enough money</span><span class='tstring_end'>&#39;</span></span>
			<span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/images/show/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_colorId'>colorId</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
		<span class='kw'>end</span>
		<span class='id identifier rubyid_createBuyOrder'><span class='object_link'><a href="#createBuyOrder-instance_method" title="#createBuyOrder (method)">createBuyOrder</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_userId'>userId</span><span class='comma'>,</span> <span class='id identifier rubyid_colorId'>colorId</span><span class='comma'>,</span> <span class='id identifier rubyid_price'>price</span><span class='comma'>,</span> <span class='id identifier rubyid_amount'>amount</span><span class='rparen'>)</span>
		<span class='id identifier rubyid_updateUserMoney'><span class='object_link'><a href="#updateUserMoney-instance_method" title="#updateUserMoney (method)">updateUserMoney</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_userId'>userId</span><span class='comma'>,</span> <span class='op'>-</span><span class='id identifier rubyid_price'>price</span> <span class='op'>*</span> <span class='id identifier rubyid_amount'>amount</span><span class='rparen'>)</span>
		<span class='id identifier rubyid_checkOrders'><span class='object_link'><a href="#checkOrders-instance_method" title="#checkOrders (method)">checkOrders</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>buy</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_getAllBuyOrders'><span class='object_link'><a href="#getAllBuyOrders-instance_method" title="#getAllBuyOrders (method)">getAllBuyOrders</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
	<span class='kw'>elsif</span> <span class='id identifier rubyid_orderType'>orderType</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Sell</span><span class='tstring_end'>&#39;</span></span>
		<span class='kw'>if</span> <span class='id identifier rubyid_userAmountOfColor'>userAmountOfColor</span> <span class='op'>==</span> <span class='kw'>nil</span> <span class='op'>||</span> <span class='id identifier rubyid_userAmountOfColor'>userAmountOfColor</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>amount</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_amount'>amount</span>
			<span class='id identifier rubyid_flash'>flash</span><span class='lbracket'>[</span><span class='symbol'>:orderError</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Not enough of this color</span><span class='tstring_end'>&#39;</span></span>
			<span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/images/show/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_colorId'>colorId</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
		<span class='kw'>end</span>
		<span class='id identifier rubyid_createSellOrder'><span class='object_link'><a href="#createSellOrder-instance_method" title="#createSellOrder (method)">createSellOrder</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_userId'>userId</span><span class='comma'>,</span> <span class='id identifier rubyid_colorId'>colorId</span><span class='comma'>,</span> <span class='id identifier rubyid_price'>price</span><span class='comma'>,</span> <span class='id identifier rubyid_amount'>amount</span><span class='rparen'>)</span>
		<span class='id identifier rubyid_updateUserColorAmount'><span class='object_link'><a href="#updateUserColorAmount-instance_method" title="#updateUserColorAmount (method)">updateUserColorAmount</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_userId'>userId</span><span class='comma'>,</span> <span class='id identifier rubyid_colorId'>colorId</span><span class='comma'>,</span> <span class='op'>-</span><span class='id identifier rubyid_amount'>amount</span><span class='rparen'>)</span>
		<span class='id identifier rubyid_checkOrders'><span class='object_link'><a href="#checkOrders-instance_method" title="#checkOrders (method)">checkOrders</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sell</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_getAllSellOrders'><span class='object_link'><a href="#getAllSellOrders-instance_method" title="#getAllSellOrders (method)">getAllSellOrders</a></span></span><span class='lparen'>(</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
	<span class='kw'>else</span> 
		<span class='id identifier rubyid_flash'>flash</span><span class='lbracket'>[</span><span class='symbol'>:orderError</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Invalid order type</span><span class='tstring_end'>&#39;</span></span>
		<span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/images/show/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_colorId'>colorId</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
	<span class='kw'>end</span>

	

	<span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/images/show/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_colorId'>colorId</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__order_delete-instance_method">
  
    #<strong>POST /order/delete</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


297
298
299
300
301
302
303
304
305
306
307
308</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 297</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/order/delete</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
	<span class='id identifier rubyid_orderId'>orderId</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:orderId</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
	<span class='id identifier rubyid_orderType'>orderType</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:type</span><span class='rbracket'>]</span>
	<span class='kw'>if</span> <span class='id identifier rubyid_orderType'>orderType</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>buy</span><span class='tstring_end'>&#39;</span></span>
		<span class='id identifier rubyid_colorId'>colorId</span> <span class='op'>=</span> <span class='id identifier rubyid_getBuyOrderById'><span class='object_link'><a href="#getBuyOrderById-instance_method" title="#getBuyOrderById (method)">getBuyOrderById</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_orderId'>orderId</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>colorId</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
		<span class='id identifier rubyid_deleteBuyOrder'><span class='object_link'><a href="#deleteBuyOrder-instance_method" title="#deleteBuyOrder (method)">deleteBuyOrder</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_orderId'>orderId</span><span class='rparen'>)</span>
	<span class='kw'>elsif</span> <span class='id identifier rubyid_orderType'>orderType</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>sell</span><span class='tstring_end'>&#39;</span></span>
		<span class='id identifier rubyid_colorId'>colorId</span> <span class='op'>=</span> <span class='id identifier rubyid_getSellOrderById'><span class='object_link'><a href="#getSellOrderById-instance_method" title="#getSellOrderById (method)">getSellOrderById</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_orderId'>orderId</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>colorId</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
		<span class='id identifier rubyid_deleteSellOrder'><span class='object_link'><a href="#deleteSellOrder-instance_method" title="#deleteSellOrder (method)">deleteSellOrder</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_orderId'>orderId</span><span class='rparen'>)</span>
	<span class='kw'>end</span>
	<span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/images/show/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_colorId'>colorId</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__users_create-instance_method">
  
    #<strong>POST /users/create</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 108</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users/create</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
	<span class='id identifier rubyid_username'>username</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:username</span><span class='rbracket'>]</span>
	<span class='id identifier rubyid_password'>password</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:password</span><span class='rbracket'>]</span>
	<span class='id identifier rubyid_passwordConfirmation'>passwordConfirmation</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:passwordConfirmation</span><span class='rbracket'>]</span>
	<span class='id identifier rubyid_admin'>admin</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:admin</span><span class='rbracket'>]</span>
	<span class='kw'>if</span> <span class='id identifier rubyid_admin'>admin</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>on</span><span class='tstring_end'>&#39;</span></span>
		<span class='id identifier rubyid_adminLevel'>adminLevel</span> <span class='op'>=</span> <span class='int'>1</span>
	<span class='kw'>else</span>
		<span class='id identifier rubyid_adminLevel'>adminLevel</span> <span class='op'>=</span> <span class='int'>0</span>
	<span class='kw'>end</span>

	<span class='kw'>if</span> <span class='id identifier rubyid_username'>username</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
		<span class='id identifier rubyid_flash'>flash</span><span class='lbracket'>[</span><span class='symbol'>:registerError</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Missing username</span><span class='tstring_end'>&#39;</span></span>
		<span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users/new</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
	<span class='kw'>elsif</span> <span class='id identifier rubyid_password'>password</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
		<span class='id identifier rubyid_flash'>flash</span><span class='lbracket'>[</span><span class='symbol'>:registerError</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Missing password</span><span class='tstring_end'>&#39;</span></span>
		<span class='id identifier rubyid_flash'>flash</span><span class='lbracket'>[</span><span class='symbol'>:username</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_username'>username</span>
		<span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users/new</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
	<span class='kw'>elsif</span> <span class='id identifier rubyid_passwordConfirmation'>passwordConfirmation</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
		<span class='id identifier rubyid_flash'>flash</span><span class='lbracket'>[</span><span class='symbol'>:username</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_username'>username</span>
		<span class='id identifier rubyid_flash'>flash</span><span class='lbracket'>[</span><span class='symbol'>:registerError</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Missing password confirmation</span><span class='tstring_end'>&#39;</span></span>
		<span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users/new</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
	<span class='kw'>end</span>

	<span class='kw'>if</span> <span class='id identifier rubyid_getUserByName'><span class='object_link'><a href="#getUserByName-instance_method" title="#getUserByName (method)">getUserByName</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_username'>username</span><span class='rparen'>)</span> <span class='op'>!=</span> <span class='kw'>nil</span>
		<span class='id identifier rubyid_flash'>flash</span><span class='lbracket'>[</span><span class='symbol'>:registerError</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Username already exists</span><span class='tstring_end'>&#39;</span></span>
		<span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users/new</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
	<span class='kw'>end</span>

	<span class='kw'>if</span> <span class='id identifier rubyid_password'>password</span> <span class='op'>==</span> <span class='id identifier rubyid_passwordConfirmation'>passwordConfirmation</span>
		<span class='id identifier rubyid_passwordDigest'>passwordDigest</span> <span class='op'>=</span> <span class='const'>BCrypt</span><span class='op'>::</span><span class='const'>Password</span><span class='period'>.</span><span class='id identifier rubyid_create'>create</span><span class='lparen'>(</span><span class='id identifier rubyid_password'>password</span><span class='rparen'>)</span>
		<span class='id identifier rubyid_createUser'><span class='object_link'><a href="#createUser-instance_method" title="#createUser (method)">createUser</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_username'>username</span><span class='comma'>,</span> <span class='id identifier rubyid_passwordDigest'>passwordDigest</span><span class='comma'>,</span> <span class='id identifier rubyid_adminLevel'>adminLevel</span><span class='rparen'>)</span>
		<span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='id identifier rubyid_getUserByName'><span class='object_link'><a href="#getUserByName-instance_method" title="#getUserByName (method)">getUserByName</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_username'>username</span><span class='rparen'>)</span>
		<span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:userId</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
		<span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:username</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>username</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
		<span class='kw'>if</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>admin</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='int'>1</span>
			<span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:admin</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
		<span class='kw'>else</span>
			<span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:admin</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>false</span>
		<span class='kw'>end</span>
		<span class='kw'>if</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:redirect</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='kw'>nil</span>
			<span class='id identifier rubyid_redirect'>redirect</span> <span class='op'>=</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:redirect</span><span class='rbracket'>]</span>
			<span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:redirect</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>nil</span>
			<span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='id identifier rubyid_redirect'>redirect</span><span class='rparen'>)</span>
		<span class='kw'>end</span>
		<span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/home</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
	<span class='kw'>else</span>
		<span class='id identifier rubyid_flash'>flash</span><span class='lbracket'>[</span><span class='symbol'>:username</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_username'>username</span>
		<span class='id identifier rubyid_flash'>flash</span><span class='lbracket'>[</span><span class='symbol'>:registerError</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Passwords do not match</span><span class='tstring_end'>&#39;</span></span>
		<span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users/new</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
	<span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__users_login-instance_method">
  
    #<strong>POST /users/login</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>users ——————————————————————</p>


  </div>
</div>
<div class="tags">
  



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 50</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users/login</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
	<span class='id identifier rubyid_username'>username</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:username</span><span class='rbracket'>]</span>
	<span class='id identifier rubyid_password'>password</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:password</span><span class='rbracket'>]</span>

	<span class='kw'>if</span> <span class='id identifier rubyid_username'>username</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
		<span class='id identifier rubyid_flash'>flash</span><span class='lbracket'>[</span><span class='symbol'>:loginError</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Missing username</span><span class='tstring_end'>&#39;</span></span>
		<span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users/login</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
	<span class='kw'>elsif</span> <span class='id identifier rubyid_password'>password</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
		<span class='id identifier rubyid_flash'>flash</span><span class='lbracket'>[</span><span class='symbol'>:username</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_username'>username</span>
		<span class='id identifier rubyid_flash'>flash</span><span class='lbracket'>[</span><span class='symbol'>:loginError</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Missing password</span><span class='tstring_end'>&#39;</span></span>
		<span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users/login</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
	<span class='kw'>end</span>

	<span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='id identifier rubyid_getUserByName'><span class='object_link'><a href="#getUserByName-instance_method" title="#getUserByName (method)">getUserByName</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_username'>username</span><span class='rparen'>)</span>

	<span class='kw'>if</span> <span class='id identifier rubyid_user'>user</span> <span class='op'>==</span> <span class='kw'>nil</span>
		<span class='id identifier rubyid_flash'>flash</span><span class='lbracket'>[</span><span class='symbol'>:loginError</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Username does not exist
		Please register if you do not have an account</span><span class='tstring_end'>&#39;</span></span>
		<span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users/login</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
	<span class='kw'>end</span>

	<span class='id identifier rubyid_pwDigest'>pwDigest</span> <span class='op'>=</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>password</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>

	<span class='kw'>if</span> <span class='const'>BCrypt</span><span class='op'>::</span><span class='const'>Password</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_pwDigest'>pwDigest</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='id identifier rubyid_password'>password</span>
		<span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:userId</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
		<span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:username</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>username</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>

		<span class='kw'>if</span> <span class='id identifier rubyid_user'>user</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>admin</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='int'>1</span>
			<span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:admin</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
		<span class='kw'>else</span>
			<span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:admin</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>false</span>
		<span class='kw'>end</span>

		<span class='kw'>if</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:redirect</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='kw'>nil</span>
			<span class='id identifier rubyid_redirect'>redirect</span> <span class='op'>=</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:redirect</span><span class='rbracket'>]</span>
			<span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:redirect</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>nil</span>
			<span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='id identifier rubyid_redirect'>redirect</span><span class='rparen'>)</span>
		<span class='kw'>end</span>
		<span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/home</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
	<span class='kw'>else</span>
		<span class='id identifier rubyid_flash'>flash</span><span class='lbracket'>[</span><span class='symbol'>:username</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_username'>username</span>
		<span class='id identifier rubyid_flash'>flash</span><span class='lbracket'>[</span><span class='symbol'>:loginError</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Wrong username or password</span><span class='tstring_end'>&#39;</span></span>
		<span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/users/login</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
	<span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="setUserImageCreated-instance_method">
  
    #<strong>setUserImageCreated</strong>(time, id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


32
33
34</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 32</span>

<span class='kw'>def</span> <span class='id identifier rubyid_setUserImageCreated'>setUserImageCreated</span><span class='lparen'>(</span><span class='id identifier rubyid_time'>time</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
	<span class='id identifier rubyid_getDatabase'><span class='object_link'><a href="#getDatabase-instance_method" title="#getDatabase (method)">getDatabase</a></span></span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>UPDATE users SET imageCreated = ? WHERE id = ?</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_time'>time</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="updateBuyOrder-instance_method">
  
    #<strong>updateBuyOrder</strong>(id, deltaAmount)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


128
129
130
131
132
133</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 128</span>

<span class='kw'>def</span> <span class='id identifier rubyid_updateBuyOrder'>updateBuyOrder</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_deltaAmount'>deltaAmount</span><span class='rparen'>)</span>
	<span class='id identifier rubyid_getDatabase'><span class='object_link'><a href="#getDatabase-instance_method" title="#getDatabase (method)">getDatabase</a></span></span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>UPDATE buyOrders SET amount = amount + ? WHERE id = ?</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_deltaAmount'>deltaAmount</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
	<span class='kw'>if</span> <span class='id identifier rubyid_getBuyOrderById'><span class='object_link'><a href="#getBuyOrderById-instance_method" title="#getBuyOrderById (method)">getBuyOrderById</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>amount</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>&lt;=</span> <span class='int'>0</span>
		<span class='id identifier rubyid_deleteBuyOrder'><span class='object_link'><a href="#deleteBuyOrder-instance_method" title="#deleteBuyOrder (method)">deleteBuyOrder</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
	<span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="updateSellOrder-instance_method">
  
    #<strong>updateSellOrder</strong>(id, deltaAmount)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


135
136
137
138
139
140</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 135</span>

<span class='kw'>def</span> <span class='id identifier rubyid_updateSellOrder'>updateSellOrder</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_deltaAmount'>deltaAmount</span><span class='rparen'>)</span>
	<span class='id identifier rubyid_getDatabase'><span class='object_link'><a href="#getDatabase-instance_method" title="#getDatabase (method)">getDatabase</a></span></span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>UPDATE sellOrders SET amount = amount + ? WHERE id = ?</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_deltaAmount'>deltaAmount</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
	<span class='kw'>if</span> <span class='id identifier rubyid_getSellOrderById'><span class='object_link'><a href="#getSellOrderById-instance_method" title="#getSellOrderById (method)">getSellOrderById</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>amount</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span> <span class='op'>&lt;=</span> <span class='int'>0</span>
		<span class='id identifier rubyid_deleteSellOrder'><span class='object_link'><a href="#deleteSellOrder-instance_method" title="#deleteSellOrder (method)">deleteSellOrder</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
	<span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="updateUserColorAmount-instance_method">
  
    #<strong>updateUserColorAmount</strong>(userId, colorId, deltaAmount)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


155
156
157</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 155</span>

<span class='kw'>def</span> <span class='id identifier rubyid_updateUserColorAmount'>updateUserColorAmount</span><span class='lparen'>(</span><span class='id identifier rubyid_userId'>userId</span><span class='comma'>,</span> <span class='id identifier rubyid_colorId'>colorId</span><span class='comma'>,</span> <span class='id identifier rubyid_deltaAmount'>deltaAmount</span><span class='rparen'>)</span>
	<span class='id identifier rubyid_getDatabase'><span class='object_link'><a href="#getDatabase-instance_method" title="#getDatabase (method)">getDatabase</a></span></span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>UPDATE userColor SET amount = amount + ? WHERE userId = ? AND colorId = ?</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_deltaAmount'>deltaAmount</span><span class='comma'>,</span> <span class='id identifier rubyid_userId'>userId</span><span class='comma'>,</span> <span class='id identifier rubyid_colorId'>colorId</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="updateUserMoney-instance_method">
  
    #<strong>updateUserMoney</strong>(id, deltaMoney)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'model/model.rb', line 36</span>

<span class='kw'>def</span> <span class='id identifier rubyid_updateUserMoney'>updateUserMoney</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_deltaMoney'>deltaMoney</span><span class='rparen'>)</span>
	<span class='id identifier rubyid_getDatabase'><span class='object_link'><a href="#getDatabase-instance_method" title="#getDatabase (method)">getDatabase</a></span></span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>UPDATE users SET money = money + ? WHERE id = ?</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_deltaMoney'>deltaMoney</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Sun Apr  6 21:27:20 2025 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.37 (ruby-3.3.7).
</div>

    </div>
  </body>
</html>